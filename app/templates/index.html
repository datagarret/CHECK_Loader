{% extends "base.html" %}

{% block content %}
        <h1>Hello!</h1>

            {% if load %}
            <div><p>File <b>{{ curr_release }}</b> is ready to load! Submit the form below to start the process!</p></div>
            <hr>
              <div class="col-4">
              <form name="load_info" action="" method="post" novalidate>
                  {{ form.hidden_tag() }}

                  <div class="form-group">
                      {{ form.release_num.label }}<br>
                      {{ form.release_num(class_="form-control") }}
                  </div>
                  <div class="form-group">
                      {{ form.release_date.label }}<br>
                      {{ form.release_date(class_="form-control") }}
                  </div>
                  <div class="form-group">
                      {{ form.file_name.label }}<br>
                      {{ form.file_name(class_="form-control") }}
                  </div>
                  <div>{{ form.submit(class_="btn btn-dark") }}</div>
              </form>
            </div>


            <div id=spinner class="d-flex justify-content-center"></div>

            {% else %}
            <div><p>File <b>{{ curr_release }}</b> is not in the data folder ensure it is in the appropriate place
            and that it is named {{ curr_release }}</p></div>
            {% endif %}

  {% block scripts %}

  <script>
  const load_form = document.forms['load_info'];
  load_form.addEventListener('submit', add_img, false);
  function add_img(event) {
    const spinner_div = document.getElementById('spinner');
    const spin_border = document.createElement('div')
    spin_border.setAttribute('class', 'spinner-border')
    spin_border.classList.add('text-dark')
    spin_border.classList.add("m-5")
    spin_border.style.width = "5rem"
    spin_border.style.height = "5rem"
    spinner_div.appendChild(spin_border);
    load_form.style.display = 'none';
  }
  </script>

  {% endblock %}



{% endblock %}
